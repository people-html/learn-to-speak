<template>
  <div class="share" @name="share">
    <div class="share-box">
      <div class="qr"><img src="../images/qr.png"/></div>
    </div>
    <img class="share-image" @name="shareImg" src=""/>
  </div>
</template>

<script>
  module.exports = {
    created: function () {
      console.log(this.domList)
      // 避免阻塞
      setTimeout(() => {
        // 将dom导出为图片
        html2canvas(this.domList.share, {dpi: window.devicePixelRatio, scale: 2}).then(canvas => {
          this.domList.shareImg.src = canvas.toDataURL()
          this.domList.shareImg.style.display = 'block'
          // document.body.appendChild(canvas)
        })
      }, 1000)
    }
  }
</script>

<style lang="less">
.share {
  width: 100%;
  height: 100%;
  background-size: 100% 100%;
  background-image: url(../images/share-bg.jpg);
}
.share-image {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  display: none;
}
.qr {
  position: fixed;
  bottom: 25%;
  align-items: center;
  width: 100%;
  img {
    margin: 0 auto;
    display: block;
  }
}
</style>